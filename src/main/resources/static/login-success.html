<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ë¡œê·¸ì¸ ì„±ê³µ</title>
</head>
<body>
<h1>ë¡œê·¸ì¸ ì„±ê³µ ğŸ‰</h1>
<pre id="user-info">ì‚¬ìš©ì ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</pre>

<script>
    const token = localStorage.getItem("jwt");
    const params = new URLSearchParams(window.location.search);
    const code = params.get("code");


    if (!token) {
        document.getElementById("user-info").textContent = "í† í°ì´ ì—†ìŠµë‹ˆë‹¤. ë¡œê·¸ì¸ ë¨¼ì € í•´ì£¼ì„¸ìš”.";
    } else {
        fetch(`/api/v1/members?code=${code}`, {
            method: "GET",
            headers: {
                "Authorization": `Bearer ${token}`
            }
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error("ì‚¬ìš©ì ì •ë³´ ìš”ì²­ ì‹¤íŒ¨");
                }
                return response.json();
            })
            .then(data => {
                document.getElementById("user-info").textContent = JSON.stringify(data, null, 2);
            })
            .catch(error => {
                document.getElementById("user-info").textContent = "ì˜¤ë¥˜: " + error.message;
            });
    }
</script>
</body>
</html>
